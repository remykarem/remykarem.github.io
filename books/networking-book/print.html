<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>networking-book</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="osi-model.html"><strong aria-hidden="true">1.</strong> OSI model</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">1.1.</strong> Layer 7 - Application</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="http.html"><strong aria-hidden="true">1.1.1.</strong> HTTP</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.1.2.</strong> SSH</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.1.3.</strong> SFTP</div></li><li class="chapter-item expanded "><a href="ssl.html"><strong aria-hidden="true">1.1.4.</strong> SSL/TLS</a></li><li class="chapter-item expanded "><a href="dns.html"><strong aria-hidden="true">1.1.5.</strong> DNS</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.2.</strong> Layer 4 - Transport</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">1.2.1.</strong> TCP</div></li><li class="chapter-item expanded "><a href="udp.html"><strong aria-hidden="true">1.2.2.</strong> UDP</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.3.</strong> Layer 3 - Network</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">1.3.1.</strong> IP</div></li><li class="chapter-item expanded "><a href="icmp.html"><strong aria-hidden="true">1.3.2.</strong> ICMP</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.4.</strong> Layer 1/2 - Physical</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">1.4.1.</strong> WiFi</div></li><li class="chapter-item expanded "><a href="arp.html"><strong aria-hidden="true">1.4.2.</strong> ARP</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Standards</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">What happens when you</li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Type a URL on the browser</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Authentication</li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> User auth</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> Basic</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.</strong> OTP</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.3.</strong> JWT</div></li><li class="chapter-item expanded "><a href="oauth2-0.html"><strong aria-hidden="true">4.4.</strong> OAuth2.0</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.5.</strong> OpenID Connect</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.6.</strong> SAML</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.7.</strong> LDAP</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.8.</strong> AD</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Server auth</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> TLS</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> mTLS</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> SSL certificates</div></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Security</li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Attacks</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> XSS</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> DOS</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> SQL injection</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> Command injection</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.5.</strong> CSRF</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.6.</strong> Logs</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.7.</strong> Clickjacking</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.8.</strong> Directory traversal</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.9.</strong> Enumeration attack</div></li><li class="chapter-item expanded "><a href="arp-cache-poisoning.html"><strong aria-hidden="true">6.10.</strong> ARP cache poisoning</a></li><li class="chapter-item expanded "><a href="ip-address-spoofing.html"><strong aria-hidden="true">6.11.</strong> IP address spoofing</a></li></ol></li><li class="chapter-item expanded "><a href="mitigation.html"><strong aria-hidden="true">7.</strong> Mitigation</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> Rate-limiting</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.2.</strong> Sanitise</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">networking-book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="osi-model"><a class="header" href="#osi-model">OSI model</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="http"><a class="header" href="#http">HTTP</a></h1>
<p><strong>Cookie</strong></p>
<p>Cookies are unique string identifiers that can be stored on the client’s browser to keep track of client’s state (for the purpose of logging in, serving customised content). They are set by the server through HTTP headers. After the cookie is set, it’s sent along with subsequent HTTP requests to the same server to allow the server to know who is contacting it.</p>
<p>Things involved in the process of setting and using cookies: HTTP request, HTTP response, cookie file on the client’s browser and the database of cookie-user values on the server</p>
<p>Cookie file contains:</p>
<ul>
<li>Website’s domain</li>
<li>String value of cookie</li>
<li>Date that cookie expires</li>
</ul>
<p>Set cookie: session=44ecb091; path=/servlets</p>
<p>Note: 3rd party cookies are cookies set for domains that are not being visited. Blocking them is not enough due to several workarounds like respawning cookies etc.</p>
<p>Safari: Preferences &gt; Privacy</p>
<p>Chrome: DevTools &gt; Application &gt; Storage &gt; Cookies</p>
<h1 id="http-clients"><a class="header" href="#http-clients">HTTP clients</a></h1>
<p>browser, cURL, postman, XMLHTTPRequest API, Fetch API</p>
<h1 id="reliance-on-tcp"><a class="header" href="#reliance-on-tcp"><strong>Reliance on TCP</strong></a></h1>
<p>HTTP uses TCP as its underlying transport protocol so that messages are guaranteed to get delivered in order. A connection must first be made.</p>
<h1 id="http-status-codes"><a class="header" href="#http-status-codes"><strong>HTTP status codes</strong></a></h1>
<ul>
<li>200 OK - request successfully processed</li>
<li>301 - moved permanently</li>
<li>403 Forbidden - server denied access to resource</li>
<li>400 Bad Request - request is malformed</li>
<li>401 Unauthorised - request requires authentication</li>
<li>404 Not Found - resource is invalid and does not exist on the server</li>
<li>500 Internal Server Error</li>
<li>503 Service Unavailable - server overloaded or internal system of server has faile</li>
</ul>
<h2 id="content-security-policy"><a class="header" href="#content-security-policy">Content Security Policy</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ssltls"><a class="header" href="#ssltls">SSL/TLS</a></h1>
<p>See a server's SSL cert</p>
<pre><code>openssl s_client -connect jvns.ca:443 -servername jvns.ca
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dns"><a class="header" href="#dns">DNS</a></h1>
<p>Get my DNS server</p>
<pre><code>cat /etc/resolv.conf   
</code></pre>
<p>where nameserver is the local dns server</p>
<p>or</p>
<pre><code>nslookup &lt;anywebsite&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="udp"><a class="header" href="#udp">UDP</a></h1>
<p>User Datagram Protocol</p>
<p>UDP is a connectionless protocol.</p>
<p><strong>How it works</strong></p>
<ul>
<li>UDP does not involve any initial handshaking.</li>
<li>Message may not get delivered.</li>
<li>Message may have some changes.</li>
<li>Message may be delivered in the wrong order.</li>
<li>Checks for corrupted message but does not correct them.</li>
</ul>
<p><strong>Multiplexing and demultiplexing</strong></p>
<p><strong>UDP message</strong></p>
<p>Consists of:</p>
<ul>
<li>Source port number</li>
<li>Destination port number</li>
<li>Length of datagram (max 2^16)</li>
<li>Checksum</li>
<li>Data</li>
</ul>
<p><strong>Applications using UDP</strong></p>
<ul>
<li>DNS</li>
<li>Xbox Live</li>
<li>Network management</li>
<li>Live audio/video streaming</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="icmp"><a class="header" href="#icmp">ICMP</a></h1>
<p><strong>Internet Control Message Protocol</strong></p>
<p>For diagnostics</p>
<ul>
<li>Used by
<ul>
<li>ping</li>
<li>traceroute</li>
</ul>
</li>
</ul>
<p><strong>Messages</strong></p>
<ul>
<li>Destination unreachable
<ul>
<li>Network unreachable</li>
<li>Host unreachable</li>
<li>Protocol unreachable</li>
<li>Port unreachable</li>
</ul>
</li>
<li>Fragmentation needed</li>
<li>Redirect</li>
<li>Time exceeded</li>
<li>Echo request and echo reply</li>
<li>…</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arp"><a class="header" href="#arp">ARP</a></h1>
<p>Address Resolution Protocol</p>
<p>Data link layer protocol that maps end host’s IP address to data link’s address</p>
<p>To find the address,</p>
<ol>
<li>Check the IPv4 host’s ARP cache</li>
<li>If none, send a broadcast ARP query frame on the LAN. This frame is received by all devices on the LAN. Host who knows the answer will reply</li>
<li>Sender updates ARP cache</li>
</ol>
<p>Address Resolution Protocol</p>
<p>mapping of (MAC address) → (IP address). This table is an <strong>ARP cache</strong>.</p>
<p>Hosts have this table. If the host doesn’t know a MAC address for a certain IP address, it sends out an <strong>ARP request packet</strong>, asking other machines for the matching MAC address.</p>
<p>The Address Resolution Protocol (ARP) is used to map an IP address to a fixed MAC address. If a host does not know a MAC address for a certain IP address, it broadcasts an ARP request packet asking other machines who is this. The machine with the corresponding IP address responds to this with an ARP reply packet with the MAC address. This result is stored in the ARP cache of the host.</p>
<div class="table-wrapper"><table><thead><tr><th>MAC address</th><th>IP address</th></tr></thead><tbody>
<tr><td>5f:44:11</td><td>192.20.1.1</td></tr>
<tr><td></td><td></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="oauth20"><a class="header" href="#oauth20">OAuth2.0</a></h1>
<p>https://oauth.net/2/</p>
<p>OAuth2.0 is a standard designed to allow an app to access resources hosted by other web apps on behalf of a user. “resource server” “authentication server”</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arp-cache-poisoning"><a class="header" href="#arp-cache-poisoning">ARP cache poisoning</a></h1>
<p>ARP cache poisoning works in the following way:</p>
<ol>
<li>Victim requests for the MAC address of the machine with IP address <code>a.b.c.d</code>. </li>
<li>Attacker sends a spoofed reply that maps IP address <code>a.b.c.d</code> to the attacker’s MAC address.</li>
<li>Victim’s ARP cache is updated (”poisoned”) with this information. Future communications between the victim and IP address <code>a.b.c.d</code> will be between the victim and the attacker.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ip-address-spoofing"><a class="header" href="#ip-address-spoofing">IP address spoofing</a></h1>
<p><img src="./ip-address-spoofing.png" alt="IP address spoofing.md" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mitigation"><a class="header" href="#mitigation">Mitigation</a></h1>
<p>https://github.com/shieldfy/API-Security-Checklist
https://cheatsheetseries.owasp.org/</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js" charset="utf-8"></script>
        <script src="editor.js" charset="utf-8"></script>
        <script src="mode-rust.js" charset="utf-8"></script>
        <script src="theme-dawn.js" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" charset="utf-8"></script>

        <script src="elasticlunr.min.js" charset="utf-8"></script>
        <script src="mark.min.js" charset="utf-8"></script>
        <script src="searcher.js" charset="utf-8"></script>

        <script src="clipboard.min.js" charset="utf-8"></script>
        <script src="highlight.js" charset="utf-8"></script>
        <script src="book.js" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
