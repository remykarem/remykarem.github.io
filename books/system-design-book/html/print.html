<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>system-design-book</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./mdbook-admonish.css">
        <link rel="stylesheet" href="./theme/catppuccin.css">
        <link rel="stylesheet" href="./theme/catppuccin-highlight.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="chapter-item expanded affix "><li class="part-title">Core concepts</li><li class="chapter-item expanded "><div>Availability</div></li><li><ol class="section"><li class="chapter-item expanded "><div>Database</div></li><li class="chapter-item expanded "><div>Services</div></li></ol></li><li class="chapter-item expanded "><div>Consistency</div></li><li><ol class="section"><li class="chapter-item expanded "><div>Strong consistency</div></li><li class="chapter-item expanded "><div>Weak consistency</div></li><li class="chapter-item expanded "><div>Eventual consistency</div></li></ol></li><li class="chapter-item expanded "><div>Scalability</div></li><li class="chapter-item expanded "><div>Monitoring</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Tings</li><li class="chapter-item expanded "><div>Load balancer</div></li><li class="chapter-item expanded "><div>Reverse proxy</div></li><li class="chapter-item expanded "><div>Cache</div></li><li class="chapter-item expanded "><div>Database</div></li><li class="chapter-item expanded "><div>Queue</div></li><li class="chapter-item expanded "><div>API gateway</div></li><li class="spacer"></li><li class="chapter-item expanded "><a href="cdn.html">CDN</a></li><li class="chapter-item expanded "><div>Data storage and retrieval</div></li><li class="chapter-item expanded "><div>Network architecture and communication protocols</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="api-design.html">API design</a></li><li class="chapter-item expanded "><a href="connections.html">Connections</a></li><li class="chapter-item expanded "><a href="communication-models.html">Communication models</a></li><li class="chapter-item expanded "><a href="network-architectures.html">Network architectures</a></li></ol></li><li class="chapter-item expanded "><a href="software-architecture.html">Software architecture</a></li><li class="chapter-item expanded "><a href="web-architecture-and-software-architecture.html">Web architecture & software architecture</a></li><li class="chapter-item expanded "><div>Availability and fault tolerance</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="deployment-strategies.html">Deployment strategies</a></li></ol></li><li class="chapter-item expanded "><div>Performance optimization</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="load-testing.html">Load testing</a></li></ol></li><li class="chapter-item expanded "><div>Content delivery</div></li><li class="chapter-item expanded "><div>Resource allocation and prioritization.</div></li><li class="chapter-item expanded "><a href="unique-numbers.html">Unique numbers</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frapp√©</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">system-design-book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="preface"><a class="header" href="#preface">Preface</a></h1>
<p>The core concepts of system design are the fundamental building blocks that are used to design, build, and maintain complex systems. Some of the core concepts of system design include:</p>
<p><strong>Scalability</strong>: The ability of a system to <em>handle increased loads</em> by adding more resources, such as additional servers, databases, or services.</p>
<p><strong>Availability</strong>: The ability of a system to remain operational and accessible, even <em>in the face of failures or other disruptions</em>.</p>
<p><strong>Performance</strong>: The ability of a system to respond quickly and efficiently to requests, and to handle high volumes of traffic.</p>
<p>Capacity planning: The process of determining the resources needed to support a system, and of ensuring that those resources are available and properly configured.</p>
<p>Load balancing: The process of distributing the load across multiple instances of a component, such as a database or service, in order to improve the availability and scalability of the system.</p>
<p><strong>Failover and redundancy</strong>: The process of ensuring that a system can continue to operate even if one or more components fail, by having multiple instances of those components, and by automatically switching to a backup instance in the event of a failure.</p>
<p>Monitoring and logging: The process of collecting and analyzing data about the performance and behavior of a system, in order to identify and address problems and to improve the overall performance and reliability of the system.</p>
<p>Security: The process of protecting a system and its data from unauthorized access, modification, or theft.</p>
<p>https://github.com/donnemartin/system-design-primer</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cdn"><a class="header" href="#cdn">CDN</a></h1>
<p>Content Delivery Network</p>
<p>A set of distributed servers work together to efficiently deliver Internet content, improving loading speed and reliability.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="api-design"><a class="header" href="#api-design">API design</a></h1>
<div class="table-wrapper"><table><thead><tr><th></th><th>REST</th><th>RPC</th></tr></thead><tbody>
<tr><td>Commonly</td><td>(all)</td><td>Server-to-server</td></tr>
<tr><td>Underlying</td><td>TCP</td><td>TCP</td></tr>
<tr><td></td><td>Resource-oriented</td><td>Action-oriented</td></tr>
<tr><td></td><td>Exchanf ereprestions</td><td></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="connections"><a class="header" href="#connections">Connections</a></h1>
<p><strong>Connections</strong></p>
<ul>
<li>Short polling</li>
<li>Long polling</li>
<li>WebSocket (half-duplex)</li>
<li>Server-sent event</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="communication-models"><a class="header" href="#communication-models">Communication models</a></h1>
<p>A communication model describes the way that different components in a system communicate with each other to exchange information and data. Examples of communication models include request-response, publish-subscribe, and event-driven.</p>
<p>Besides &quot;communication model,&quot; the concept can also be referred to as:</p>
<ol>
<li>Interaction model</li>
<li>Message passing model</li>
<li>Communication pattern</li>
<li>Data exchange model</li>
<li>Protocol model</li>
<li>Data exchange pattern</li>
<li>Inter-process communication (IPC) model</li>
<li>Network protocol</li>
<li>Communication mechanism</li>
<li>Message exchange pattern.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="network-architectures"><a class="header" href="#network-architectures">Network architectures</a></h1>
<p>A network architecture, on the other hand, refers to the way that nodes in a network are connected and how they communicate with each other. Examples of network architectures include client-server, peer-to-peer (P2P), and mesh.</p>
<p>Besides &quot;network architecture,&quot; the concept can also be referred to as:</p>
<ol>
<li>Network topology</li>
<li>Network design</li>
<li>Network organization</li>
<li>Network structure</li>
<li>Network configuration</li>
<li>Network arrangement</li>
<li>Network setup</li>
<li>Network layout</li>
<li>Network infrastructure</li>
<li>Network model.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="software-architecture"><a class="header" href="#software-architecture">Software architecture</a></h1>
<ul>
<li>Monolith</li>
<li>Microservice</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="web-asrchitecture--software-architecture"><a class="header" href="#web-asrchitecture--software-architecture">Web asrchitecture &amp; software architecture</a></h1>
<h1 id="client-server-web-architecture"><a class="header" href="#client-server-web-architecture"><strong>Client-server web architecture</strong></a></h1>
<h2 id="rest-api"><a class="header" href="#rest-api"><strong>REST API</strong></a></h2>
<p>Rest stands for representational state transfer. It is a design of the architecture of web services. The design revolves around having resources identified by logical URLs. This design dictates how you should interact with the resources. </p>
<p>This implementations adheres to 6 REST architectural constraints:</p>
<ul>
<li>Client-server architecture</li>
<li>Statelessness</li>
<li>Cacheability: responses must implicitly or explicitly define themselves as cacheable or non-cacheable</li>
<li>‚Ä¶</li>
</ul>
<h2 id="graphql-api"><a class="header" href="#graphql-api"><strong>GraphQL API</strong></a></h2>
<p>One of the major advantages of GraphQL is that it allows for naturally querying nested information.</p>
<p>https://www.howtographql.com/</p>
<h2 id="http-pull--http-push"><a class="header" href="#http-pull--http-push"><strong>HTTP PULL &amp; HTTP PUSH</strong></a></h2>
<p>For every response, there is has to be a request first (‚ÄúHTTP PULL‚Äù). In order to avoid client sending requests over and over (there is a limit to the number of open connections a server can manage), there is the HTTP PUSH mechanism. Once the client has initiated a request, the server keeps pushing new updates to the client whenever they are available. Persistent connections are needed when the frequency of request-response between server and client is very high. Below are some HTTP PUSH technologies.</p>
<h3 id="ajax-asynchronous-javascript--xml"><a class="header" href="#ajax-asynchronous-javascript--xml">AJAX (Asynchronous JavaScript &amp; XML)</a></h3>
<p>AJAX enables a particular section of the web page to be updated dynamically. AJAX uses XMLHttpRequest object for sending requests to the server which is built in the browser, and then uses JavaScript to update the HTML DOM. AJAX is commonly used with JQuery.</p>
<h3 id="websocket"><a class="header" href="#websocket">WebSocket</a></h3>
<p>A WebSocket connection is preferred when we need a persistent bi-directional low latency data flow from the client to the server and back. The connection is open for as long as we want. Eg. chat apps, real-time social streams, browser-based multiplayer games.</p>
<h3 id="streaming-over-http"><a class="header" href="#streaming-over-http">Streaming over HTTP</a></h3>
<p>This is ideal for cases where we need to stream large data over HTTP by breaking it into smaller chunks. Connection is persistent. Eg. stream multimedia content.</p>
<h2 id="client-side-rendering"><a class="header" href="#client-side-rendering"><strong>Client-side rendering</strong></a></h2>
<p>When the browser receives an HTTP response, it uses the following components to render the page:</p>
<ul>
<li>Browser engine</li>
<li>Rendering engine</li>
<li>JavaScript interpreter</li>
<li>Networking &amp; UI backend</li>
<li>Data storage</li>
</ul>
<h2 id="server-side-rendering"><a class="header" href="#server-side-rendering"><strong>Server-side rendering</strong></a></h2>
<p>The server renders the HTML and sends it to the client.</p>
<h1 id="p2p-architecture-peer-to-peer"><a class="header" href="#p2p-architecture-peer-to-peer"><strong>P2P architecture (Peer-to-peer)</strong></a></h1>
<p>P2P networks have a decentralised architecture. The data is exchanged over TCP/IP.</p>
<h2 id="decentralised-architecture"><a class="header" href="#decentralised-architecture">Decentralised architecture</a></h2>
<p>Nobody has control over your data.</p>
<h2 id="seeder"><a class="header" href="#seeder">Seeder</a></h2>
<p>A node which hosts the data and provides bandwidth to upload data to network</p>
<h2 id="leecher"><a class="header" href="#leecher">Leecher</a></h2>
<p>A node which downloads the data from the network</p>
<h2 id="segmented-p2p-file-transfer"><a class="header" href="#segmented-p2p-file-transfer">Segmented P2P file transfer</a></h2>
<p>A node N hosts a large file.</p>
<p>Other nodes who need the file locate node N.</p>
<p>These nodes download the file in chunks, and re-host it.</p>
<h2 id="types-of-networks"><a class="header" href="#types-of-networks">Types of networks</a></h2>
<ul>
<li>Unstructured: peers connect to each other randomly. O(n) complexity. Eg. Gossip, Kazaa, Gnutella.</li>
<li>Structured: peers have proper indexing of the topology (‚Äúdistributed hash table‚Äù). Eg. BitTorrent.</li>
<li>Hybrid: eg. digital cryptocurrencies (Bitcoin, Peercoin), decentralised microblogging (Twister).</li>
</ul>
<h1 id="event-driven"><a class="header" href="#event-driven"><strong>Event-driven</strong></a></h1>
<p>Blocking</p>
<p>Flow of execution is blocked waiting for another process to complete</p>
<p>Non-blocking</p>
<p>Flow of execution is not blocked does not wait for another process to complete</p>
<p>Events</p>
<p>AKA ‚ÄúIO / input-output‚Äù. Eg. button click, HTTP request, change in variable</p>
<p>Non-blocking architecture</p>
<p>Reactive / event-driven architecture.</p>
<p>This means the code is written to react to the events (IO) occurring regularly, as opposed to sequentially moving through the lines of code. Event-driven architecture is all about processing asynchronous data streams. Eg. Nodejs is a single-threaded non-blocking framework written to handle more IO intensive tasks. It has an event loop architecture.</p>
<p>Webhooks</p>
<p>The server fires an HTTP event to all registered endpoints of the consumer</p>
<p><strong>Scalability</strong></p>
<p>Scalability is the ability of an application to handle or withstand increased workload without sacrificing latency. Types of scaling:</p>
<ul>
<li>Vertical scaling / scaling up: improve hardware</li>
<li>Horizontal scaling / scaling out: add more hardware</li>
</ul>
<p><strong>Latency</strong></p>
<p>Latency is the amount of time a system takes to respond to a user request. It is usually divided into 2 parts:</p>
<ul>
<li>Network latency</li>
<li>Application latency</li>
</ul>
<p><strong>Cloud elasticity</strong></p>
<p>Scaling up and down dynamically</p>
<p><strong>Improving scalability</strong></p>
<ul>
<li>Profiling</li>
<li>Caching</li>
<li>CDN</li>
<li>Data compression</li>
<li>Avoid unnecessary client-server requests</li>
</ul>
<p><strong>Testing scalability</strong></p>
<p>Run load &amp; stress tests on the system by simulating concurrent traffic</p>
<p><strong>High availability</strong></p>
<p>High availability is the ability of the system to stay online despite having failures at the infrastructural level in real-time.</p>
<p><strong>Why do systems fail?</strong></p>
<ul>
<li>Software crashes</li>
<li>Hardware failures</li>
<li>Human errors (flawed configurations)</li>
<li>Planned downtimes</li>
</ul>
<p><strong>How to achieve high availability?</strong></p>
<p>Fault tolerance</p>
<p>A fault-tolerant system is equipped to handle faults. To achieve this, the entire massive service is architecturally broken down into smaller loosely coupled services called the microservices.</p>
<p>Replication</p>
<p>Having similar nodes run the workload together</p>
<p>Redundancy</p>
<p>Duplicating components and keeping them active and on standby</p>
<h1 id="message-queue--task-queue"><a class="header" href="#message-queue--task-queue"><strong>Message queue / task queue</strong></a></h1>
<p>A queue system which routes from the source to destination. Manage background work that must be executed (outside the HTTP request-response cycle).</p>
<p>Messaging protocols</p>
<ul>
<li>AMQP</li>
<li>STOMP</li>
</ul>
<p>Message broker: Technologies implementing messaging protocols (translates a message from the formal messaging protocol of the sender to the formal messaging protocol of the receiver):</p>
<ul>
<li>RabbitMQ</li>
<li>ActiveMQ</li>
<li>Apache Kafka</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deployment-strategies"><a class="header" href="#deployment-strategies">Deployment strategies</a></h1>
<ul>
<li>Rolling update</li>
<li>Blue (new) - green
<ul>
<li>Change DNS or push version</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="load-testing"><a class="header" href="#load-testing">Load testing</a></h1>
<pre><code class="language-bash">wrk -t8 -c256 -d30s http://127.0.0.1:8080/
</code></pre>
<p>For load testing</p>
<pre><code class="language-python">from locust import HttpLocust, TaskSet, between

def index(l):
    l.client.get(&quot;/&quot;)

def profile(l):
    l.client.get(&quot;/profile&quot;)

class UserBehavior(TaskSet):
    tasks = {
        index: 2, 
        profile: 1
    }

    def on_start(self):
        index(self)

    def on_stop(self):
        profile(self)

class WebsiteUser(HttpLocust):
    task_set = UserBehavior
    wait_time = between(5.0, 9.0)
</code></pre>
<p><a href="https://www.petefreitag.com/item/689.cfm">https://www.petefreitag.com/item/689.cfm</a></p>
<pre><code class="language-bash">ab -n 100 -c 10 [http://yahoo.com](http://yahoo.com/)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unique-numbers"><a class="header" href="#unique-numbers">Unique numbers</a></h1>
<ul>
<li>UUIDv1</li>
<li>UUIDv4</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
